# ğŸ§ª Test_Auto_gestion_stock_c

Automated testing suite for the [gestion_stock_c](https://github.com/amaraoussama94/gestion_stock_c) project, focused on verifying SQLite-backed product management operations.

This project includes functional, behavioral, and smoke tests designed to validate core CRUD workflows and binary stability in a clean, modular fashion.

---

## ğŸ§© Test Matrix: Objectives, Types & Status

| Test Script             | Type             | Objective                                                                  | Status   |
|------------------------|------------------|----------------------------------------------------------------------------|----------|
| `add_prod_test.py`     | Behavioral Test  | Simulate user-driven product addition via stdin                            | âœ… Done   |
| `smoke_test.py`        | Smoke Test       | Launch binary with test flag, confirm clean startup/shutdown               | âœ… Done   |
| `test_modification.py` | Functional Test  | Ensure product updates are properly persisted without side effects         | âœ… Done  |
| `test_suppression.py`  | Functional Test  | Validate product deletion and confirm absence in DB and listing            | âœ… Done |
| `test_liste.py`        | Functional Test  | Compare product listing output with known data                             | âœ… Done |
| `full_journey_test.py` | Scenario Test    | Run complete user flow: add â†’ modify â†’ delete â†’ list â†’ quit                | âœ… Done|
| `regression_db_crash.py`| Regression Test | Ensure past DB corruption bug no longer appears when deleting product      | âœ… Done|

âœ… = Functional  
â³ = In progress  
ğŸ“ = Design completed, implementation pending  
ğŸ§ª = Identified as useful test, not yet designed

---

## ğŸ“ Project Structure

```text
Test_Auto_gestion_stock_c/
â”œâ”€â”€ build/                       # Compiled gestion_stock_c binary output
â”œâ”€â”€ expected/                    # Reference outputs for output comparison
â”‚   â””â”€â”€ liste_sample.txt         # Expected product listing sample
â”œâ”€â”€ reports/                     # JSON + Markdown reports auto-generated by CI orchestrator
â”‚   â”œâ”€â”€ v1.3.2.json              # Structured machine-readable report
â”‚   â””â”€â”€ v1.3.2.md                # Human-readable summary
â”œâ”€â”€ utils/                       # Reusable test and CI coordination modules
â”‚   â”œâ”€â”€ __init__.py              # Module initializer for relative imports
â”‚   â”œâ”€â”€ test_runner.py           # Executes tests and collects structured results
â”‚   â”œâ”€â”€ version.py               # Extracts Git version/tag info
â”‚   â””â”€â”€ ci_orchestrator.py       # Orchestrates testing and report generation
â”œâ”€â”€ tests/                       # Python test scripts simulating CLI behavior
â”‚   â”œâ”€â”€ add_prod_test.py         # Behavioral test: Add product via stdin
â”‚   â”œâ”€â”€ smoke_test.py            # Smoke test: launch + exit
â”‚   â”œâ”€â”€ test_modification.py     # Functional test: modify product
â”‚   â”œâ”€â”€ test_suppression.py      # Functional test: delete product
â”‚   â”œâ”€â”€ test_liste.py            # Functional test: list products
â”‚   â”œâ”€â”€ full_journey_test.py     # Scenario test: full user flow
â”‚   â”œâ”€â”€ regression_db_crash.py   # Regression test: past DB crash
â”‚   â””â”€â”€ common.py                # Shared utilities: DB setup, binary invocation
â”œâ”€â”€ docs/                        # Markdown documents describing each test scenario
â”‚   â”œâ”€â”€ add_prod_test.md
â”‚   â”œâ”€â”€ smoke_test.md
â”‚   â”œâ”€â”€ modify_prod_test.md
â”‚   â”œâ”€â”€ delete_prod_test.md
â”‚   â”œâ”€â”€ list_prod_test.md
â”‚   â”œâ”€â”€ full_journey_test.md
â”‚   â””â”€â”€ regression_bug_test.md
â”œâ”€â”€ run_tests.py                 # (Planned) Unified runner for shell-based scripts
â””â”€â”€ README.md                    # Project overview and instructions

```
## Running Python Tests

Make sure gestion_stock_c binary is compiled and available in build/.

python3 add_prod_test.py
python3 smoke_test.py

##  ğŸ”§ Running Shell-Based Tests (Planned)

bash run_tests.sh

##  ğŸ’¡ Test Type Glossary

Functional Test: Verifies correctness of isolated functions or features.

Behavioral Test: Validates user-like interactions and system responsiveness.

Smoke Test: Checks basic health (launches, exits, CLI parsing).

Scenario Test: Simulates real-world multi-step usage.

Regression Test: Guards against recurrence of previously fixed bugs.

#  ğŸ—ï¸ Planned Enhancements

âœ… Migrate all tests to pure Python for cross-platform support

âš™ï¸ Add test_common.py for reusable DB setup, teardown, and binary invocation

ğŸ“Š Implement structured test reporting inside run_tests.py

ğŸ”„ Expand regression test coverage based on future bug fixes

## ğŸ§ª Running Tests via CLI

### ğŸ”¹ Prerequisites
- Ensure the `gestion_stock_c` binary is compiled and available in the `build/` directory.
- Python 3.8+ installed.
- All test scripts are located in the `tests/` directory.
- Reports will be saved in `reports/` with Git version tagging.

---

### ğŸš€ Run Individual Tests

Use this for debugging or focused validation:

```bash
py  tests/add_prod_test.py
py tests/test_modification.py
```

### ğŸ§© Run All Tests with CI Orchestrator

This command runs all Python tests and generates structured reports:

```bash
py utils/ci_orchestrator.py
```
It will:

- ğŸ“¦ Extract the current Git version from your repository history.

- ğŸ§ª Automatically discover and execute all Python test scripts located in `tests/`.

- ğŸ§¾ Collect results including pass/fail status, duration, and logs (stdout/stderr).

- ğŸ“‹ Generate structured reports and save them to:

  - `reports/<version>.json` â†’ machine-readable output for CI systems or analytics.

  - `reports/<version>.md` â†’ human-readable Markdown summary for contributors and reviews.

- ğŸ’  Use UTF-8 encoding for reliable cross-platform compatibility.

- ğŸ•’ Timestamp each run to ensure traceability across versions and environments.

## ğŸ“‹ Test Report Summary

ğŸš¦ smoke_test.py ....................... âœ… PASSED

ğŸ§ª add_prod_test.py .................... âœ… PASSED

ğŸ§© modify_prod_test.py ................. â³ SKIPPED

ğŸ§¼ delete_prod_test.py ................. â³ SKIPPED

âœ”ï¸ Total: 2 Passed / 2 Skipped / 0 Failed
---
